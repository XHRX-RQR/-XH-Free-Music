# ğŸµ XH Free Music - æ°¸ä¹…å…è´¹çš„éŸ³ä¹æµåª’ä½“å¹³å°

<div align="center">

[![Python](https://img.shields.io/badge/Python-3.9%2B-blue.svg)](https://www.python.org/)
[![Flask](https://img.shields.io/badge/Flask-3.0%2B-green.svg)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/Platform-Web-orange.svg)](https://github.com)
[![Free](https://img.shields.io/badge/Price-100%25%20Free-brightgreen.svg)](.)
[![Music Library](https://img.shields.io/badge/Music-Unlimited-ff69b4.svg)](.)

### ğŸŒŸ è®©éŸ³ä¹è‡ªç”±æµåŠ¨ï¼Œè®©ç¾å¥½è§¦æ‰‹å¯åŠ ğŸŒŸ

**å®Œå…¨å…è´¹ Â· æµ·é‡æ›²åº“ Â· æ— éœ€ä»˜è´¹ Â· å³æœå³å¬**

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§) â€¢ [åœ¨çº¿æ¼”ç¤º](#) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ’ ä¸ºä»€ä¹ˆé€‰æ‹© XH Free Musicï¼Ÿ

åœ¨è¿™ä¸ªéŸ³ä¹ä»˜è´¹å¢™æ—ç«‹çš„æ—¶ä»£ï¼Œæˆ‘ä»¬ç›¸ä¿¡**éŸ³ä¹åº”è¯¥æ˜¯è‡ªç”±çš„ï¼Œæ˜¯è§¦æ‰‹å¯åŠçš„**ã€‚XH Free Music è‡´åŠ›äºæ‰“é€ ä¸€ä¸ªå®Œå…¨å…è´¹ã€æ— å¹¿å‘Šã€æ— é™åˆ¶çš„éŸ³ä¹æµåª’ä½“å¹³å°ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½äº«å—éŸ³ä¹çš„ç¾å¥½ã€‚

### âœ¨ æ ¸å¿ƒä¼˜åŠ¿

<table>
<tr>
<td width="50%">

#### ğŸ†“ **100% å…è´¹**
- âœ… å®Œå…¨å…è´¹ï¼Œæ— éœ€ä»˜è´¹ä¼šå‘˜
- âœ… æ— å¹¿å‘Šå¹²æ‰°ï¼Œçº¯å‡€ä½“éªŒ
- âœ… æ— æ’­æ”¾æ¬¡æ•°é™åˆ¶
- âœ… æ— ä¸‹è½½æ•°é‡é™åˆ¶
- âœ… æ‰€æœ‰åŠŸèƒ½æ°¸ä¹…å…è´¹å¼€æ”¾

</td>
<td width="50%">

#### ğŸ¼ **æµ·é‡æ›²åº“**
- ğŸµ æ¶µç›–åè¯­ã€æ¬§ç¾ã€æ—¥éŸ©ã€å¤å…¸ç­‰å„ç±»éŸ³ä¹
- ğŸ¤ æ”¯æŒä¸»æµæ­Œæ‰‹çš„å®Œæ•´ä¸“è¾‘
- ğŸ¸ åŒ…å«å°ä¼—ç‹¬ç«‹éŸ³ä¹äººä½œå“
- ğŸ¹ è¦†ç›–å„ç±»éŸ³ä¹é£æ ¼å’Œæµæ´¾
- ğŸ“» å®æ—¶åŒæ­¥æœ€æ–°çƒ­é—¨æ­Œæ›²

</td>
</tr>
<tr>
<td width="50%">

#### âš¡ **å³æœå³å¬**
- ğŸ” æ™ºèƒ½æœç´¢ï¼Œç§’çº§å“åº”
- ğŸ§ åœ¨çº¿æµåª’ä½“æ’­æ”¾ï¼Œæ— éœ€ç­‰å¾…
- ğŸ’¾ æ”¯æŒç¦»çº¿ä¸‹è½½ï¼Œéšæ—¶éšåœ°æ’­æ”¾
- ğŸ“± å®Œç¾æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ğŸŒ æ— éœ€VPNï¼Œå›½å†…å¤–ç•…å¬æ— é˜»

</td>
<td width="50%">

#### ğŸ›¡ï¸ **å®‰å…¨éšç§**
- ğŸ” æ•°æ®åŠ å¯†å­˜å‚¨ï¼Œä¿æŠ¤éšç§
- ğŸ‘¤ å¤šç”¨æˆ·ç‹¬ç«‹è´¦å·ç³»ç»Ÿ
- ğŸ—‚ï¸ ä¸ªäººä¸“å±éŸ³ä¹åº“
- ğŸš« ä¸è¿½è¸ªç”¨æˆ·è¡Œä¸º
- âœ¨ å¼€æºé€æ˜ï¼Œå€¼å¾—ä¿¡èµ–

</td>
</tr>
</table>

---

## ğŸ“‹ ç›®å½•

- [ä¸ºä»€ä¹ˆé€‰æ‹© XH Free Music](#-ä¸ºä»€ä¹ˆé€‰æ‹©-xh-free-music)
- [åŠŸèƒ½äº®ç‚¹](#-åŠŸèƒ½äº®ç‚¹)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—)
- [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [éƒ¨ç½²æ–¹æ¡ˆ](#-éƒ¨ç½²æ–¹æ¡ˆ)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [å¼€å‘è´¡çŒ®](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯åè®®](#-è®¸å¯åè®®)

---

## ğŸ¯ åŠŸèƒ½äº®ç‚¹

### ğŸµ éŸ³ä¹æ’­æ”¾

<table>
<tr>
<td>

**ğŸ” æ™ºèƒ½æœç´¢**
- æ”¯æŒæ­Œæ‰‹å + æ­Œæ›²åç²¾ç¡®æœç´¢
- æ”¯æŒä¸“è¾‘åã€æ­Œè¯å…³é”®è¯æœç´¢
- æ™ºèƒ½åŒ¹é…ç®—æ³•ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡æ­Œæ›²
- å®æ—¶æœç´¢å»ºè®®ï¼Œæå‡æœç´¢æ•ˆç‡

**â–¶ï¸ åœ¨çº¿æ’­æ”¾**
- HTML5 åŸç”Ÿæ’­æ”¾å™¨ï¼Œå…¼å®¹æ€§å¼º
- æµåª’ä½“æŠ€æœ¯ï¼Œå³ç‚¹å³æ’­
- æ”¯æŒè¿›åº¦æ‹–æ‹½ã€éŸ³é‡è°ƒèŠ‚
- è‡ªåŠ¨ç»­æ’­ï¼Œæ‰“é€ æ— ç¼å¬æ­Œä½“éªŒ

**ğŸ’¾ ç¦»çº¿ä¸‹è½½**
- ä¸€é”®ä¸‹è½½é«˜å“è´¨éŸ³é¢‘æ–‡ä»¶
- æ”¯æŒ MP3ã€M4A ç­‰ä¸»æµæ ¼å¼
- æ‰¹é‡ä¸‹è½½ï¼Œé«˜æ•ˆä¾¿æ·
- ä¸‹è½½è®°å½•ç®¡ç†ï¼Œéšæ—¶æŸ¥çœ‹

</td>
<td>

**ğŸ“š ä¸ªäººæ›²åº“**
- æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„éŸ³ä¹æ”¶è—ç©ºé—´
- æ’­æ”¾å†å²è‡ªåŠ¨è®°å½•
- æ’­æ”¾æ¬¡æ•°ç»Ÿè®¡
- å¿«é€Ÿé‡æ’­å·²å¬æ­Œæ›²

**ğŸ¨ ç²¾ç¾ç•Œé¢**
- ç°ä»£åŒ–æ·±è‰²ä¸»é¢˜ï¼ŒæŠ¤çœ¼èˆ’é€‚
- æµç•…çš„åŠ¨ç”»æ•ˆæœå’Œè¿‡æ¸¡
- æ¸å˜è‰²å½©è®¾è®¡ï¼Œè§†è§‰äº«å—
- å“åº”å¼å¸ƒå±€ï¼Œå®Œç¾é€‚é…å„ç«¯è®¾å¤‡

**ğŸ” è´¦å·ç³»ç»Ÿ**
- å®‰å…¨çš„ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- å¯†ç åŠ å¯†å­˜å‚¨ï¼Œä¿æŠ¤éšç§
- å¤šç”¨æˆ·æ•°æ®å®Œå…¨éš”ç¦»
- ä¼šè¯ç®¡ç†ï¼Œè‡ªåŠ¨ç™»å½•

</td>
</tr>
</table>

### ğŸŒˆ ä½¿ç”¨åœºæ™¯

- **ğŸ§ æ—¥å¸¸å¬æ­Œ**ï¼šæ— å¹¿å‘Šå¹²æ‰°ï¼Œæ²‰æµ¸å¼éŸ³ä¹ä½“éªŒ
- **ğŸ’¼ åŠå…¬å­¦ä¹ **ï¼šèƒŒæ™¯éŸ³ä¹åŠ©åŠ›ï¼Œæå‡ä¸“æ³¨åŠ›å’Œæ•ˆç‡
- **ğŸƒ è¿åŠ¨å¥èº«**ï¼šåŠ¨æ„ŸèŠ‚å¥ç›¸ä¼´ï¼Œæ¿€å‘è¿åŠ¨çƒ­æƒ…
- **ğŸ˜´ ç¡å‰æ”¾æ¾**ï¼šè½»æŸ”æ—‹å¾‹é™ªä¼´ï¼Œèˆ’ç¼“èº«å¿ƒåŠ©çœ 
- **ğŸ‰ æ´¾å¯¹èšä¼š**ï¼šæµ·é‡æ›²åº“æ”¯æŒï¼Œéšå¿ƒæ‰€æ¬²ç‚¹æ­Œ

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Python** | 3.9+ | æ ¸å¿ƒå¼€å‘è¯­è¨€ |
| **Flask** | 3.0+ | Webæ¡†æ¶ |
| **Flask-SQLAlchemy** | 3.0+ | ORMæ•°æ®åº“ |
| **Flask-Login** | 0.6+ | ç”¨æˆ·è®¤è¯ |
| **yt-dlp** | 2024.8+ | éŸ³é¢‘èµ„æºè·å– |
| **asyncio** | å†…ç½® | å¼‚æ­¥ä»»åŠ¡å¤„ç† |

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **HTML5** | è¯­ä¹‰åŒ–ç»“æ„ |
| **CSS3** | ç°ä»£æ ·å¼ã€åŠ¨ç”»ã€æ¸å˜ |
| **JavaScript (ES6+)** | äº¤äº’é€»è¾‘ã€å¼‚æ­¥è¯·æ±‚ |
| **Fetch API** | RESTful API è°ƒç”¨ |
| **Audio API** | éŸ³é¢‘æ’­æ”¾æ§åˆ¶ |

### æ•°æ®åº“è®¾è®¡

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    username VARCHAR(80) UNIQUE NOT NULL,
    email VARCHAR(120) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- éŸ³ä¹è¡¨
CREATE TABLE musics (
    id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL,
    title VARCHAR(200) NOT NULL,
    artist VARCHAR(200),
    filename VARCHAR(255) NOT NULL,
    file_size INTEGER,
    video_url VARCHAR(500),
    play_count INTEGER DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å®¢æˆ·ç«¯ (Browser)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  HTML/CSS   â”‚  â”‚ JavaScript  â”‚  â”‚  Audio API  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â”‚      HTTP/JSON  â”‚    WebSocket    â”‚
          â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Flask Web æœåŠ¡å™¨                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              è·¯ç”±å±‚ (Routes)                     â”‚   â”‚
â”‚  â”‚  /login  /register  /api/search  /api/cache    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚        ä¸šåŠ¡é€»è¾‘å±‚ (Services)      â”‚                   â”‚
â”‚  â”‚  - ç”¨æˆ·è®¤è¯  - éŸ³ä¹æœç´¢          â”‚                   â”‚
â”‚  â”‚  - éŸ³é¢‘ä¸‹è½½  - ç¼“å­˜ç®¡ç†          â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                   â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚      æ•°æ®è®¿é—®å±‚ (Models)          â”‚                   â”‚
â”‚  â”‚  User Model  â”‚  Music Model      â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   SQLite æ•°æ®åº“    â”‚
          â”‚  - users è¡¨       â”‚
          â”‚  - musics è¡¨      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½®
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux / macOS / Windows 10+
- **Python**ï¼š3.9 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**ï¼š512MB RAM
- **ç£ç›˜ç©ºé—´**ï¼š500MBï¼ˆä¸å«éŸ³ä¹æ–‡ä»¶ï¼‰
- **ç½‘ç»œ**ï¼šç¨³å®šçš„äº’è”ç½‘è¿æ¥

### æ¨èé…ç½®
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 20.04+ / macOS 12+
- **Python**ï¼š3.10+
- **å†…å­˜**ï¼š2GB RAM
- **ç£ç›˜ç©ºé—´**ï¼š10GB SSD
- **ç½‘ç»œ**ï¼š10Mbps+ å¸¦å®½

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®



ä¸‹è½½æœ¬é¡¹ç›®æ ¹ç›®å½•ã€‚

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Linux/macOS:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

**å›½å†…é•œåƒåŠ é€Ÿ**ï¼š
```bash
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
```

### 3ï¸âƒ£ åˆå§‹åŒ–æ•°æ®åº“

```bash
python3 init_db.py
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
======================================================================
ğŸ—„ï¸  æ•°æ®åº“åˆå§‹åŒ–
======================================================================
âœ… åˆ›å»ºæ•°æ®åº“è¡¨...
ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„:
  - users: ç”¨æˆ·è¡¨
  - musics: éŸ³ä¹è¡¨
ğŸ‘¤ åˆ›å»ºæµ‹è¯•ç”¨æˆ·...
  âœ… æµ‹è¯•ç”¨æˆ·åˆ›å»ºæˆåŠŸ: test / 123456
======================================================================
âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
======================================================================
```

### 4ï¸âƒ£ å¯åŠ¨æœåŠ¡

**å¼€å‘æ¨¡å¼**ï¼š
```bash
python3 web_app.py
```

**ç”Ÿäº§æ¨¡å¼**ï¼ˆæ¨èï¼‰ï¼š
```bash
# ä½¿ç”¨ Gunicorn (Linux/macOS)
gunicorn -w 4 -b 0.0.0.0:8080 web_app:app

# ä½¿ç”¨ Waitress (è·¨å¹³å°)
waitress-serve --port=8080 web_app:app
```

## 5ï¸âƒ£ è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
- **æœ¬åœ°è®¿é—®**ï¼šhttp://127.0.0.1:8080
- **å±€åŸŸç½‘è®¿é—®**ï¼šhttp://YOUR_IP:8080

**é»˜è®¤æµ‹è¯•è´¦å·**ï¼š
- ç”¨æˆ·åï¼š`test`
- å¯†ç ï¼š`123456`

> ğŸ’¡ **æç¤º**ï¼šé¦–æ¬¡ä½¿ç”¨å»ºè®®æ³¨å†Œä¸ªäººè´¦å·ï¼Œäº«å—ä¸“å±éŸ³ä¹åº“

---

## ğŸ“± ä½¿ç”¨æŒ‡å—

### æ³¨å†Œä¸ç™»å½•

1. **æ³¨å†Œæ–°è´¦å·**
   - ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
   - å¡«å†™ç”¨æˆ·åã€é‚®ç®±å’Œå¯†ç 
   - æäº¤å®Œæˆæ³¨å†Œ

2. **ç™»å½•è´¦å·**
   - è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
   - ç‚¹å‡»"ç™»å½•"æŒ‰é’®
   - è‡ªåŠ¨è·³è½¬åˆ°ä¸»ç•Œé¢

### æœç´¢ä¸æ’­æ”¾éŸ³ä¹

1. **æœç´¢æ­Œæ›²**
   ```
   ğŸµ æœç´¢é¡µé¢
   â”œâ”€ è¾“å…¥æ­Œæ‰‹åï¼šå‘¨æ°ä¼¦
   â”œâ”€ è¾“å…¥æ­Œæ›²åï¼šæ™´å¤©
   â””â”€ ç‚¹å‡»æœç´¢æŒ‰é’®
   ```

2. **æ’­æ”¾éŸ³ä¹**
   - åœ¨æœç´¢ç»“æœä¸­ç‚¹å‡»"æ’­æ”¾"æŒ‰é’®
   - ç³»ç»Ÿè‡ªåŠ¨è·å–éŸ³é¢‘å¹¶å¼€å§‹æ’­æ”¾
   - åº•éƒ¨æ’­æ”¾å™¨æ˜¾ç¤ºå½“å‰æ’­æ”¾ä¿¡æ¯

3. **æ§åˆ¶æ’­æ”¾**
   - â¸ï¸ **æš‚åœ/æ’­æ”¾**ï¼šç‚¹å‡»æ’­æ”¾å™¨ä¸­å¤®æŒ‰é’®
   - â®ï¸ **ä¸Šä¸€æ›²**ï¼šç‚¹å‡»å·¦ä¾§ç®­å¤´
   - â­ï¸ **ä¸‹ä¸€æ›²**ï¼šç‚¹å‡»å³ä¾§ç®­å¤´
   - ğŸ”Š **éŸ³é‡è°ƒèŠ‚**ï¼šæ‹–åŠ¨éŸ³é‡æ»‘å—
   - ğŸ“Š **è¿›åº¦è°ƒæ•´**ï¼šæ‹–åŠ¨è¿›åº¦æ¡

### ç®¡ç†ä¸ªäººæ›²åº“

1. **æŸ¥çœ‹æ›²åº“**
   - åˆ‡æ¢åˆ°"æˆ‘çš„æ›²åº“"æ ‡ç­¾
   - æŸ¥çœ‹æ‰€æœ‰æ’­æ”¾è¿‡çš„æ­Œæ›²è®°å½•

2. **é‡æ–°æ’­æ”¾**
   - ç‚¹å‡»æ›²åº“ä¸­ä»»æ„æ­Œæ›²çš„"æ’­æ”¾"æŒ‰é’®
   - ç³»ç»Ÿé‡æ–°è·å–å¹¶æ’­æ”¾

3. **åˆ é™¤è®°å½•**
   - ç‚¹å‡»æ­Œæ›²æ—çš„"åˆ é™¤"æŒ‰é’®
   - ç¡®è®¤åä»æ›²åº“ä¸­ç§»é™¤

### ä¸‹è½½éŸ³ä¹

1. **ä¸‹è½½å½“å‰æ’­æ”¾**
   - åœ¨æ’­æ”¾å™¨ä¸­ç‚¹å‡»"ä¸‹è½½"æŒ‰é’®
   - éŸ³é¢‘æ–‡ä»¶è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°

2. **æ‰¹é‡ä¸‹è½½**
   - åœ¨æœç´¢ç»“æœä¸­é€ä¸ªä¸‹è½½
   - æ”¯æŒå¤šé¦–æ­Œæ›²è¿ç»­ä¸‹è½½

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
CUI/
â”œâ”€â”€ web_app.py              # Flask ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ models.py               # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”œâ”€â”€ auth_routes.py          # ç”¨æˆ·è®¤è¯è·¯ç”±
â”œâ”€â”€ music_service.py        # éŸ³ä¹æœåŠ¡æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ init_db.py             # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–æ¸…å•
â”œâ”€â”€ freemusic.db           # SQLite æ•°æ®åº“æ–‡ä»¶
â”‚
â”œâ”€â”€ templates/             # HTML æ¨¡æ¿ç›®å½•
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ login.html         # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ register.html      # æ³¨å†Œé¡µé¢
â”‚   â””â”€â”€ test.html          # æµ‹è¯•é¡µé¢
â”‚
â”œâ”€â”€ static/                # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css      # å…¨å±€æ ·å¼è¡¨ (1084è¡Œ)
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ app.js         # å‰ç«¯äº¤äº’é€»è¾‘ (795è¡Œ)
â”‚
â””â”€â”€ bilibili_music/        # éŸ³ä¹æ–‡ä»¶å­˜å‚¨ç›®å½•
    â””â”€â”€ [ç”¨æˆ·å]_[æ­Œæ‰‹]-[æ­Œæ›²].m4a
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
# Flask é…ç½®
FLASK_APP=web_app.py
FLASK_ENV=development
SECRET_KEY=your-secret-key-here

# æ•°æ®åº“é…ç½®
DATABASE_URI=sqlite:///freemusic.db

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=8080

# æ–‡ä»¶å­˜å‚¨
DOWNLOAD_FOLDER=./bilibili_music
MAX_CONTENT_LENGTH=524288000  # 500MB
```

### Web_app.py é…ç½®é¡¹

```python
app.config['SECRET_KEY'] = 'your-secret-key-change-in-production'
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///freemusic.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
app.config['MAX_CONTENT_LENGTH'] = 500 * 1024 * 1024  # æœ€å¤§ä¸Šä¼ 500MB
app.config['DOWNLOAD_FOLDER'] = './bilibili_music'
```

---

## ğŸ“¡ APIæ–‡æ¡£

### ğŸ” è®¤è¯ç›¸å…³

#### æ³¨å†Œç”¨æˆ·
```http
POST /api/register
Content-Type: application/json

{
  "username": "string",
  "email": "string",
  "password": "string"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•"
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /api/login
Content-Type: application/json

{
  "username": "string",
  "password": "string"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸï¼",
  "data": {
    "username": "test",
    "email": "test@example.com"
  }
}
```

#### ç”¨æˆ·ç™»å‡º
```http
POST /api/logout
```

#### è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```http
GET /api/user/info
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "is_authenticated": true,
  "data": {
    "id": 1,
    "username": "test",
    "email": "test@example.com"
  }
}
```

### ğŸµ éŸ³ä¹ç›¸å…³

#### æœç´¢éŸ³ä¹
```http
POST /api/search
Content-Type: application/json
Authorization: Required (ç™»å½•å)

{
  "keyword": "å‘¨æ°ä¼¦ æ™´å¤©"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "title": "æ™´å¤© - å‘¨æ°ä¼¦",
      "url": "https://www.bilibili.com/video/BV...",
      "score": 85,
      "bvid": "BV1d4411N7zD"
    }
  ],
  "total": 1
}
```

#### ç¼“å­˜éŸ³ä¹åˆ°æœåŠ¡å™¨
```http
POST /api/cache
Content-Type: application/json
Authorization: Required

{
  "video_url": "https://www.bilibili.com/video/BV...",
  "title": "æ™´å¤©",
  "artist": "å‘¨æ°ä¼¦",
  "bvid": "BV1d4411N7zD"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "ç¼“å­˜æˆåŠŸ",
  "data": {
    "id": 1,
    "title": "æ™´å¤©",
    "artist": "å‘¨æ°ä¼¦",
    "filename": "test_å‘¨æ°ä¼¦ - æ™´å¤©.m4a",
    "file_size": 6717560,
    "play_url": "/api/stream/test_å‘¨æ°ä¼¦ - æ™´å¤©.m4a",
    "download_url": "/api/file/test_å‘¨æ°ä¼¦ - æ™´å¤©.m4a"
  }
}
```

#### è·å–éŸ³ä¹åº“åˆ—è¡¨
```http
GET /api/library
Authorization: Required
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "title": "æ™´å¤©",
      "artist": "å‘¨æ°ä¼¦",
      "filename": "test_å‘¨æ°ä¼¦ - æ™´å¤©.m4a",
      "play_count": 5,
      "created_at": "2025-12-13T19:00:00"
    }
  ],
  "total": 1
}
```

#### æµå¼æ’­æ”¾éŸ³ä¹
```http
GET /api/stream/:filename
Authorization: Required
```

#### ä¸‹è½½éŸ³ä¹æ–‡ä»¶
```http
GET /api/file/:filename
Authorization: Required
```

#### åˆ é™¤éŸ³ä¹
```http
DELETE /api/delete/:music_id
Authorization: Required
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º

1. **å®‰è£…å¼€å‘å·¥å…·**ï¼š
```bash
pip install pytest pytest-cov black flake8
```

2. **ä»£ç æ ¼å¼åŒ–**ï¼š
```bash
black web_app.py models.py
```

3. **ä»£ç æ£€æŸ¥**ï¼š
```bash
flake8 web_app.py --max-line-length=120
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨ Flask è°ƒè¯•æ¨¡å¼ï¼š
```python
app.run(host='0.0.0.0', port=8080, debug=True)
```

æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

### æ•°æ®åº“è¿ç§»

ä½¿ç”¨ Flask-Migrateï¼ˆå¯é€‰ï¼‰ï¼š
```bash
pip install flask-migrate
flask db init
flask db migrate -m "Initial migration"
flask db upgrade
```

---

## ğŸš¢ éƒ¨ç½²æ–¹æ¡ˆ

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **åˆ›å»º Dockerfile**ï¼š
```dockerfile
FROM python:3.10-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .
RUN python3 init_db.py

EXPOSE 8080
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:8080", "web_app:app"]
```

2. **æ„å»ºé•œåƒ**ï¼š
```bash
docker build -t freemusic:latest .
```

3. **è¿è¡Œå®¹å™¨**ï¼š
```bash
docker run -d -p 8080:8080 \
  -v $(pwd)/bilibili_music:/app/bilibili_music \
  -v $(pwd)/freemusic.db:/app/freemusic.db \
  --name freemusic \
  freemusic:latest
```

### Nginx åå‘ä»£ç†

**nginx.conf**ï¼š
```nginx
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location /static {
        alias /path/to/freemusic/CUI/static;
        expires 30d;
    }
}
```

### Systemd æœåŠ¡

**freemusic.service**ï¼š
```ini
[Unit]
Description=Free Music Web Service
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/path/to/freemusic/CUI
ExecStart=/usr/bin/gunicorn -w 4 -b 0.0.0.0:8080 web_app:app
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl enable freemusic
sudo systemctl start freemusic
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ— æ³•ä¸‹è½½éŸ³ä¹ï¼Ÿ
**A**: ç¡®ä¿å·²å®‰è£… `ffmpeg`ï¼š
```bash
# Ubuntu/Debian
sudo apt install ffmpeg

# macOS
brew install ffmpeg

# Windows
# ä¸‹è½½ https://ffmpeg.org/download.html
```

### Q2: æ•°æ®åº“è¢«é”å®šï¼Ÿ
**A**: SQLite ä¸æ”¯æŒé«˜å¹¶å‘å†™å…¥ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ PostgreSQLï¼š
```python
app.config['SQLALCHEMY_DATABASE_URI'] = 'postgresql://user:pass@localhost/xhfreemusic'
```

### Q3: éŸ³é¢‘æ— æ³•æ’­æ”¾ï¼Ÿ
**A**: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ï¼Œç¡®è®¤ï¼š
- æ–‡ä»¶è·¯å¾„æ­£ç¡®
- MIME ç±»å‹æ­£ç¡®ï¼ˆaudio/mp4, audio/mpegï¼‰
- CORS é…ç½®æ­£ç¡®

### Q4: å¦‚ä½•ä¿®æ”¹ç«¯å£ï¼Ÿ
**A**: ç¼–è¾‘ `web_app.py` æœ€åä¸€è¡Œï¼š
```python
app.run(host='0.0.0.0', port=YOUR_PORT, debug=True)
```

### Q5: å¦‚ä½•æ¸…ç©ºæ•°æ®åº“ï¼Ÿ
**A**: é‡æ–°è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š
```bash
python3 init_db.py
```

---

## ğŸ“„ è®¸å¯åè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

```
MIT License

Copyright (c) 2025 Free Music

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬çƒ­çƒˆæ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘ŠBugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç æ”¹è¿›ï¼Œéƒ½èƒ½è®©XH Free Musicå˜å¾—æ›´å¥½ã€‚

### å¦‚ä½•è´¡çŒ®

1. **ğŸ› æŠ¥å‘Šé—®é¢˜**
   - åœ¨ [Issues](https://github.com/XHRX-RQR/-XH-Free-Music/issues) ä¸­åˆ›å»ºæ–°issue
   - è¯¦ç»†æè¿°é—®é¢˜åœºæ™¯å’Œå¤ç°æ­¥éª¤
   - é™„ä¸Šé”™è¯¯æˆªå›¾æˆ–æ—¥å¿—

2. **ğŸ’¡ æå‡ºå»ºè®®**
   - åœ¨ Issues ä¸­æå‡ºåŠŸèƒ½éœ€æ±‚
   - è¯´æ˜è¯¥åŠŸèƒ½çš„ä½¿ç”¨åœºæ™¯å’Œä»·å€¼

3. **ğŸ“ è´¡çŒ®ä»£ç **
   - Fork æœ¬ä»“åº“
   - åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
   - ç¼–å†™ä»£ç å¹¶æµ‹è¯•
   - æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
   - æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
   - å¼€å¯ Pull Request

### è´¡çŒ®è§„èŒƒ

- ä»£ç é£æ ¼éµå¾ª PEP 8 è§„èŒƒ
- æäº¤ä¿¡æ¯ä½¿ç”¨æ¸…æ™°çš„ä¸­æ–‡æˆ–è‹±æ–‡æè¿°
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿ä¸ç ´åç°æœ‰åŠŸèƒ½

---

## ğŸ“§ è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**ï¼šhttps://github.com/XHRX-RQR/-XH-Free-Music
- **é‚®ç®±**ï¼šwjxhmax@outlook.com
- **ç¤¾åŒºè®¨è®º**ï¼šæ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„è®¨è®ºç»„

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ä¸º XH Free Music æä¾›çš„æ”¯æŒï¼š

- [Flask](https://flask.palletsprojects.com/) - ä¼˜é›…çš„ Python Web æ¡†æ¶
- [yt-dlp](https://github.com/yt-dlp/yt-dlp) - å¼ºå¤§çš„åª’ä½“å¤„ç†å·¥å…·
- [SQLAlchemy](https://www.sqlalchemy.org/) - å®Œå–„çš„ Python ORM æ¡†æ¶
- æ‰€æœ‰å¼€æºç¤¾åŒºçš„è´¡çŒ®è€…ä»¬

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰æ”¯æŒå’Œä½¿ç”¨ XH Free Music çš„ç”¨æˆ·ï¼Œæ˜¯ä½ ä»¬è®©éŸ³ä¹æ›´åŠ è‡ªç”±ï¼

---

## âš ï¸ å…è´£å£°æ˜

XH Free Music æ˜¯ä¸€ä¸ªå¼€æºå­¦ä¹ é¡¹ç›®ï¼Œæ—¨åœ¨æŠ€æœ¯äº¤æµå’Œå­¦ä¹ ä½¿ç”¨ã€‚

- æœ¬é¡¹ç›®ä»…ä¾›ä¸ªäººå­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨
- ç”¨æˆ·åº”éµå®ˆæ‰€åœ¨åœ°åŒºçš„æ³•å¾‹æ³•è§„å’Œç‰ˆæƒè§„å®š
- è¯·å‹¿å°†æœ¬é¡¹ç›®ç”¨äºä»»ä½•å•†ä¸šç”¨é€”
- å› ä½¿ç”¨æœ¬é¡¹ç›®äº§ç”Ÿçš„ä»»ä½•çº çº·ï¼Œå¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»

å¦‚æœæ‚¨å–œæ¬¢æŸä½è‰ºæœ¯å®¶çš„ä½œå“ï¼Œè¯·é€šè¿‡æ­£è§„æ¸ é“æ”¯æŒä»–ä»¬ã€‚

---

<div align="center">

### ğŸŒŸ è®©éŸ³ä¹è‡ªç”±æµåŠ¨ ğŸŒŸ

**XH Free Music** - æ°¸ä¹…å…è´¹çš„éŸ³ä¹æµåª’ä½“å¹³å°

Made with â¤ï¸ by XH Free Music Team

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼

æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä»¬æŒç»­æ”¹è¿›çš„åŠ¨åŠ›

[â¬†ï¸ å›åˆ°é¡¶éƒ¨](#-xh-free-music---æ°¸ä¹…å…è´¹çš„éŸ³ä¹æµåª’ä½“å¹³å°)

</div>
